@using LANCommander.SDK.Services
@namespace LANCommander.Launcher.UI
@inject IConnectionClient ConnectionClient

@if (ConnectionClient.IsConnected() || ConnectionClient.IsOfflineMode())
{
    @Authenticated
}
else if (!ConnectionClient.IsConfigured())
{
    @NotAuthenticated
}

@code {
    [Parameter] public RenderFragment Authenticated { get; set; }
    [Parameter] public RenderFragment NotAuthenticated { get; set; }
    [Parameter] public bool NoAutoValidate { get; set; }

    protected override async Task OnInitializedAsync()
    {
        ConnectionClient.OnConnect += (sender, args) => InvokeAsync(StateHasChanged);
        ConnectionClient.OnOfflineModeEnabled += (sender, args) => InvokeAsync(StateHasChanged);
    }
}